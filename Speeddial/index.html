<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>Speeddial</title>
  <meta name="description" content="">
  <meta name="author" content="AQtun">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro&amp;display=swap" rel="stylesheet">

  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/skeleton.css">
  <link rel="stylesheet" href="style.css">

</head>
<body onkeypress="return SearchKey(event)">
  <header style="position: fixed; width: 100%;">
    <div id="searchBody">
      <div id="search">
        <table class="u-full-width" style="margin: 0;">
          <tbody>
            <tr>
              <td style="padding: 0px;">
                <input id="searchInput" onkeyup="getQueryGoogle(this.value)" type="text" placeholder="Search with Google"> <!-- // to be improved -->
                <img id="searchIcon" src="img/search.svg" onclick="SearchGoogle(document.getElementById('searchInput').value)">
              </td>
            </tr>
            <tr>
              <td onclick="SearchSuggestion(this.innerText)"></td>
            </tr>
            <tr>
              <td onclick="SearchSuggestion(this.innerText)"></td>
            </tr>
            <tr>
              <td onclick="SearchSuggestion(this.innerText)"></td>
            </tr>
            <tr>
              <td onclick="SearchSuggestion(this.innerText)"></td>
            </tr>
            <tr>
              <td onclick="SearchSuggestion(this.innerText)"></td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </header>
  <div id="websites"></div>

  <script type="text/javascript">
    var targetName,
        targetUrl;

    function addContextMenuEvent(element) {
      element.addEventListener('contextmenu', function(ev) {
          var menu = document.getElementById('contextMenu');
          ev.preventDefault();
          targetName = this.firstChild.innerText;
          targetUrl = this.attributes.href.nodeValue;

          document.getElementById('contextMenuEdit').children[1].innerText = "Edit " + targetName;
          document.getElementById('contextMenuRemove').children[1].innerText = "Remove " + targetName;
          document.getElementById('removeWebsiteButton').innerText = "Remove " + targetName;

          menu.style.display = "block";
          menu.style.left = ev.pageX + 'px';
          if (ev.clientY > window.innerHeight - 200) {
            menu.style.top = ev.pageY - 155 + 'px';
          } else {
            menu.style.top = ev.pageY + 'px';
          }
          return false;
      }, false);
    }

    function addMiddlemouseEvent(element) {
      element.addEventListener('mouseup', e => {
      	if (e.button == 1) {
          openUrlNewTab(element.attributes.href.nodeValue);
        }
      });
    }

    var websitesElement = document.getElementById('websites');
    function displayWebsiteTile(name, url) {
      websitesElement.innerHTML += '<div class="tile" href="' + url + '" onclick="openUrl(this.attributes.href.nodeValue)"><h4>' + name + '</h4></div>';
    }

    if (localStorage.getItem("websites") != null) {
      var localWebsites = localStorage.getItem("websites").split(',');
      for (website of localWebsites) {
        website = website.split('=');
        displayWebsiteTile(website[0], website[1])
      }
    }

    function refreshContextMenuEvents() {
      for (tile of document.getElementsByClassName('tile')) {
        addContextMenuEvent(tile);
      }
    }

    function refreshMiddlemouseEvents() {
      for (tile of document.getElementsByClassName('tile')) {
        addMiddlemouseEvent(tile);
      }
    }

    refreshContextMenuEvents();
    refreshMiddlemouseEvents();
  </script>

  <img id="settingsButton" class="toggle" onclick="openSettings()" src="img/settings.svg">
  <img id="addButton" class="toggle" onclick="openAddMenu()" src="img/add.svg">
  <div id="add" class="menu">
    <img id="closeAddButton" onclick="closeAddMenu()" src="img/close.svg" class="toggle">
    <h5>add website</h5>
    <label>Name</label>
    <input class="u-full-width" type="text" placeholder="google" id="add-name">
    <label>URL</label>
    <input class="u-full-width" type="url" placeholder="https://www.google.com/" id="add-url">
    <button onclick="addWebsite()">Add</button>
  </div>
  <div id="remove" class="menu">
    <h5>are you sure?</h5>
    <img id="closeRemoveButton" onclick="closeRemoveMenu()" src="img/close.svg" class="toggle">
    <button id="removeWebsiteButton" onclick="removeWebsite(targetName, targetUrl); closeRemoveMenu()">Remove ...</button>
  </div>
  <div id="settings" class="menu">
    <img id="closeSettingsButton" onclick="closeSettings()" src="img/close.svg" class="toggle">
    <h5>settings</h5>
    <div>
      <label>Background</label>
      <input id="backgroundInput" class="u-full-width" type="text" placeholder="direct link, color, gradient" onchange="backgroundPreview()">
      <label>Background Blur</label>
      <input id="backgroundBlurRange" type="range" min="0" max="100" value="0">
      <h6 id="blurAmountText">0px</h6>
    </div>
    <div>
      <label>Theme</label>
      <input id="radioLightTheme" type="radio" name="theme" onchange="themePreview()"> Light Theme<br>
      <input id="radioDarkTheme" type="radio" name="theme" onchange="themePreview()"> Dark Theme<br>
    </div>
    <div>
      <label>Background Buttons</label>
      <input id="radioLightBackgroundButtons" type="radio" name="backgroundButtons" onchange="backgroundButtonPreview()"> Light<br>
      <input id="radioDarkBackgroundButtons" type="radio" name="backgroundButtons" onchange="backgroundButtonPreview()"> Dark<br>
    </div>
    <button onclick="applySettings(); closeSettings()">Apply</button>
  </div>
  <div id="contextMenu">
    <table class="u-full-width" style="margin: 0;">
      <tbody>
        <tr>
          <td id="contextMenuAdd" onclick="openAddMenu()"><img src="img/add.svg"><bdo>Add New</bdo></td>
        </tr>
        <tr>
          <td id="contextMenuEdit" onclick="openEditMenu()"><img src="img/edit.svg"><bdo>Edit</bdo></td>
        </tr>
        <tr>
          <td id="contextMenuRemove" onclick="openRemoveMenu()"><img src="img/delete.svg"><bdo>Remove</bdo></td>
        </tr>
      </tbody>
    </table>
  </div>


  <script type="text/javascript">

    /* CONTEXT MENU
    ---------------------------------------------*/

    document.addEventListener('mouseup', function(ev) {
      document.getElementById('contextMenu').style.display = "none";
    }, false);

    /* OPENING AND CLOSING MENUS
    ---------------------------------------------*/

    var addMenu = document.getElementById("add");
    var settings = document.getElementById("settings");
    var removeMenu = document.getElementById('remove');
    var addMenuOpen = false;
    var settingsOpen = false;

    function openAddMenu() {
      if (addMenuOpen) {
        closeAddMenu();
      } else {
        addMenuOpen = true;
        addMenu.style.animationName = "openMenu";
        addMenu.style.animationDuration = "0.25s";
        if (settingsOpen) {
          closeSettings();
        }
      }
    }

    function closeAddMenu() {
      addMenu.style.animationName = "closeMenu";
      addMenu.style.animationDuration = "0.25s";
      addMenuOpen = false;
      document.getElementById("add-name").value = "";
      document.getElementById("add-url").value = "";
    }

    function openSettings() {
      if (settingsOpen) {
        closeSettings();
      } else {
        settingsOpen = true;
        settings.style.animationName = "openSettings";
        settings.style.animationDuration = "0.25s";
        if (addMenuOpen) {
          closeAddMenu();
        }
      }
      document.getElementById('backgroundBlurRange').value = window.localStorage.getItem('backgroundBlur').substr(0, window.localStorage.getItem('backgroundBlur').length - 2);
      if (window.localStorage.getItem('background').startsWith('url("')) {
        document.getElementById('backgroundInput').value = window.localStorage.getItem('background').substr(5, window.localStorage.getItem('background').length - 7);
      } else {
        document.getElementById('backgroundInput').value = window.localStorage.getItem('background');
      }

      if (window.localStorage.getItem('theme') == 'dark') {
        document.getElementById('radioDarkTheme').checked = true;
        document.getElementById('radioLightTheme').checked = false;
      } else {
        document.getElementById('radioLightTheme').checked = true;
        document.getElementById('radioDarkTheme').checked = false;
      }

      if (window.localStorage.getItem('backgroundButtons') == 'light') {
        document.getElementById('radioLightBackgroundButtons').checked = true;
        document.getElementById('radioDarkBackgroundButtons').checked = false;
      } else {
        document.getElementById('radioDarkBackgroundButtons').checked = true;
        document.getElementById('radioLightBackgroundButtons').checked = false;
      }

      blurRangeUpdate(document.getElementById('backgroundBlurRange').value);
      document.getElementById('backgroundBlurRange').addEventListener('mousemove', blurRangeUpdate);
    }

    function closeSettings() {
      settings.style.animationName = "closeSettings";
      settings.style.animationDuration = "0.25s";
      settingsOpen = false;
      document.getElementById('backgroundBlurRange').removeEventListener('mousemove', blurRangeUpdate);
      document.documentElement.style.setProperty('--background-blur', window.localStorage.getItem('backgroundBlur'));
      if (window.localStorage.getItem('backgroundButtons') == 'light') {
        displayLightBackgroundButtons();
      } else {
        displayDarkBackgroundButtons();
      }
      if (window.localStorage.getItem('theme') == 'light') {
        displayLightTheme();
        refreshImageTiles();
      } else {
        displayDarkTheme();
        refreshImageTiles();
      }
      document.documentElement.style.setProperty('--background', window.localStorage.getItem('background'));
    }

    function applySettings() {
      if (document.getElementById('radioLightTheme').checked) {
        window.localStorage.setItem('theme', 'light');
        displayLightTheme();
        refreshImageTiles();
      } else {
        window.localStorage.setItem('theme', 'dark');
        displayDarkTheme();
        refreshImageTiles();
      }

      if (document.getElementById('backgroundInput').value != '') {
        var background = document.getElementById('backgroundInput').value;
        if (background.search('http') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.jpg') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.jpeg') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.png') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.webp') != -1) {
          background = 'url("' + background + '")';
        }
        window.localStorage.setItem('background', background);
        document.documentElement.style.setProperty('--background', window.localStorage.getItem('background'));
      }
      window.localStorage.setItem('backgroundBlur', document.getElementById('backgroundBlurRange').value + "px");
      document.documentElement.style.setProperty('--background-blur', window.localStorage.getItem('backgroundBlur'));

      if (document.getElementById('radioDarkBackgroundButtons').checked) {
        window.localStorage.setItem('backgroundButtons', 'dark');
        displayDarkBackgroundButtons();
      } else {
        window.localStorage.setItem('backgroundButtons', 'light');
        displayLightBackgroundButtons();
      }
    }

    function blurRangeUpdate() {
      var blur = document.getElementById('backgroundBlurRange').value + 'px';
      document.getElementById('blurAmountText').innerText = blur;
      document.documentElement.style.setProperty('--background-blur', blur);
    }

    function backgroundPreview() {
      if (document.getElementById('backgroundInput').value != '') {
        var background = document.getElementById('backgroundInput').value;
        if (background.search('http') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.jpg') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.jpeg') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.png') != -1) {
          background = 'url("' + background + '")';
        } else if (background.search('.webp') != -1) {
          background = 'url("' + background + '")';
        }
        document.documentElement.style.setProperty('--background', background);
      }
    }

    function backgroundButtonPreview() {
      if (document.getElementById('radioDarkBackgroundButtons').checked) {
        displayDarkBackgroundButtons();
      } else {
        displayLightBackgroundButtons();
      }
    }

    function themePreview() {
      if (document.getElementById('radioDarkTheme').checked) {
        displayDarkTheme();
        refreshImageTilesPreview('dark');
      } else {
        displayLightTheme();
        refreshImageTilesPreview('light');
      }
    }

    function openRemoveMenu() {
      removeMenu.style.animationName = "openMenu";
      removeMenu.style.animationDuration = "0.25s";
    }

    function closeRemoveMenu() {
      removeMenu.style.animationName = "closeMenu";
      removeMenu.style.animationDuration = "0.25s";
    }



    /* THEME
    ---------------------------------------------*/

    function displayDarkTheme() {
      document.documentElement.style.setProperty('--background-color', "#000b");
      document.documentElement.style.setProperty('--background-color-popup', "#222");
      document.documentElement.style.setProperty('--icon-color', "#fff");
      document.documentElement.style.setProperty('--background-low-contrast', "rgb(40, 40, 40)");
      document.documentElement.style.setProperty('--background-contrast', "rgb(15, 15, 15)");
      document.documentElement.style.setProperty('--table-border', "#3e3e3e");
      document.documentElement.style.setProperty('--text', "#ddd");
      document.documentElement.style.setProperty('--text-low-contrast', "#ccc");
      document.documentElement.style.setProperty('--text-contrast', "#aaa");

      document.getElementById('closeSettingsButton').src = 'img/close-dark.svg';
      document.getElementById('closeAddButton').src = 'img/close-dark.svg';
      document.getElementById('closeRemoveButton').src = 'img/close-dark.svg';
      document.getElementById('searchIcon').src = 'img/search-dark.svg';

      document.getElementById('contextMenuAdd').firstElementChild.src = 'img/add-dark.svg';
      document.getElementById('contextMenuEdit').firstElementChild.src = 'img/edit-dark.svg';
      document.getElementById('contextMenuRemove').firstElementChild.src = 'img/delete-dark.svg';
    }

    function displayLightTheme() {
      document.documentElement.style.setProperty('--background-color', "#fffb");
      document.documentElement.style.setProperty('--background-color-popup', "#fff");
      document.documentElement.style.setProperty('--icon-color', "#000");
      document.documentElement.style.setProperty('--background-low-contrast', "rgb(249, 249, 249)");
      document.documentElement.style.setProperty('--background-contrast', "rgb(244, 244, 244)");
      document.documentElement.style.setProperty('--table-border', "#e1e1e1");
      document.documentElement.style.setProperty('--text', "#222");
      document.documentElement.style.setProperty('--text-low-contrast', "#333");
      document.documentElement.style.setProperty('--text-contrast', "#555");

      document.getElementById('closeSettingsButton').src = 'img/close.svg';
      document.getElementById('closeAddButton').src = 'img/close.svg';
      document.getElementById('closeRemoveButton').src = 'img/close.svg';
      document.getElementById('searchIcon').src = 'img/search.svg';

      document.getElementById('contextMenuAdd').firstElementChild.src = 'img/add.svg';
      document.getElementById('contextMenuEdit').firstElementChild.src = 'img/edit.svg';
      document.getElementById('contextMenuRemove').firstElementChild.src = 'img/delete.svg';
    }

    if (window.localStorage.getItem('theme') == 'dark') {
      displayDarkTheme();
    }

    function displayDarkBackgroundButtons() {
      document.getElementById('addButton').src = 'img/add.svg';
      document.getElementById('settingsButton').src = 'img/settings.svg';
    }

    function displayLightBackgroundButtons() {
      document.getElementById('addButton').src = 'img/add-dark.svg';
      document.getElementById('settingsButton').src = 'img/settings-dark.svg';
    }

    if (window.localStorage.getItem('backgroundButtons') == 'light') {
      displayLightBackgroundButtons();
    }

    /* WEBSITE TILES
    ---------------------------------------------*/

    function addWebsite() {
      var name = document.getElementById("add-name").value;
      var url = document.getElementById("add-url").value;
      if (localStorage.getItem("websites") != null) {
        localStorage.setItem('websites', localStorage.getItem('websites') + ',' + name + '=' + url);
      } else {
        localStorage.setItem('websites', name + '=' + url);
      }
      closeAddMenu();
      displayWebsiteTile(name, url);
      tile = document.getElementsByClassName('tile')[document.getElementsByClassName('tile').length - 1];
      setWebsiteLogo(tile, getHost(tile.attributes.href.nodeValue));
      refreshContextMenuEvents();
      refreshMiddlemouseEvents();
    }

    function removeWebsiteTile(name, url) {
      var tiles = document.getElementsByClassName('tile');
      for (tile of tiles) {
        if (tile.children[0].innerText == name) {
          if (tile.attributes.href.nodeValue == url) {
            tile.remove();
            return
          }
        }
      }
      refreshContextMenuEvents();
      refreshMiddlemouseEvents();
    }

    function removeWebsite(name, url) {
      if (!localStorage.getItem('websites').endsWith((name + '=' + url))) {
        localStorage.setItem('websites', localStorage.getItem('websites').replace(name + '=' + url + ',', ''));
        removeWebsiteTile(name, url);
      } else {
        if (localStorage.getItem('websites').search(',') > -1) {
          localStorage.setItem('websites', localStorage.getItem('websites').replace(new RegExp(',' + name + '=' + url + '$'), ''));
          removeWebsiteTile(name, url);
        } else if (localStorage.getItem('websites') == name + '=' + url) {
          localStorage.removeItem('websites');
          removeWebsiteTile(name, url);
        }
      }
    }

    /* SEARCH
    ---------------------------------------------*/

    function openUrl(url) {
      window.open(url, "_self")
    }

    function openUrlNewTab(url) {
      var tab = window.open(url, '_blank');
      tab.focus();
    }

    function Search(text) {
      if (text == undefined || text == null || text == "") {
        return
      }
      if (text.replace(/[^+]/g, "").length > 0) {
        for (i = 0; text.replace(/[^+]/g, "").length > 0; i += 1) {
          text = text.replace("+", "%2B");
        }
        for (i = 0; text.replace(/[^" "]/g, "").length > 0; i += 1) {
          text = text.replace(" ", "+");
        }
      } else {
        for (i = 0; text.replace(/[^" "]/g, "").length > 0; i += 1) {
          text = text.replace(" ", "+");
        }
        for (var i = 0; i < text.replace("#", "%23").length; i++) {
          text = text.replace("#", "%23");
        }
      }
      SearchGoogle(text);// to be improved
    }

    function SearchKey(e) {
      if (document.activeElement === document.getElementById('searchInput') && e.keyCode == 13) {
          Search(document.getElementById('searchInput').value);
      } else if (e.keyCode == 13) {
          document.getElementById("searchInput").focus();
      } else {
        document.getElementById('search').style.height = '45px';
      }
    }

    function getHost(url) {
      var result = url.match(/([^:\/\s]+)/g);
      if (result[0] == undefined || result[0] == null) {
        return
      }
      if (result[1] == undefined || result[1] == null) {
        if (result[0].match('.://')) {
          return
        }
        return result[0]
      }
      if (result[1].startsWith('www.')) {
        return result[1].substring(4, result[1].length)
      }
      return result[1]
    }

    /* WEBSITE LOGOS
    ---------------------------------------------*/

    var themedLogoDatabase = [
                            /*A*/
                            /*B*/
                            /*C*/
                            /*D*/'docs.google.com',
                            /*E*/
                            /*F*/
                            /*G*/'genius.com',
                            /*H*/
                            /*I*/
                            /*J*/
                            /*K*/
                            /*L*/
                            /*M*/'music.youtube.com',
                            /*N*/
                            /*O*/
                            /*P*/
                            /*Q*/
                            /*R*/'reddit.com', 'rap.genius.com',
                            /*S*/
                            /*T*/
                            /*U*/
                            /*V*/
                            /*W*/'wikipedia.org',
                            /*X*/
                            /*Y*/'youtube.com'
                            /*Z*/
                            ];

    var logoDatabase = [
                            /*A*/
                            /*B*/
                            /*C*/
                            /*D*/
                            /*E*/
                            /*F*/
                            /*G*/'google.com',
                            /*H*/
                            /*I*/'imdb.com',
                            /*J*/
                            /*K*/
                            /*L*/
                            /*M*/'mail.google.com', 'morele.net',
                            /*N*/
                            /*O*/
                            /*P*/
                            /*Q*/
                            /*R*/
                            /*S*/
                            /*T*/'twitter.com', 'twitch.tv', 'translate.google.com',
                            /*U*/
                            /*V*/
                            /*W*/
                            /*X*/'xda-developers.com'
                            /*Y*/
                            /*Z*/
                            ];

    function isWebsiteLogoAvailable(host, theme) {
      for (logo of logoDatabase) {
        if (host == logo) {
          return [true, 'url("img/logo/' + host + '.png")']
        }
      }
      for (logo of themedLogoDatabase) {
        if (host == logo) {
          return [true, 'url("img/logo/' + theme + '/' + host + '.png")']
        }
      }
      return [false, null]
    }

    function setWebsiteLogo(element, host, theme) {
      var response = isWebsiteLogoAvailable(host, theme);
      if (response[0]) {
        element.style.backgroundImage = response[1];
        element.classList.add('image');
      }
    }

    function refreshImageTiles() {
      var tiles = document.getElementsByClassName('tile');
      for (tile of tiles) {
        setWebsiteLogo(tile, getHost(tile.attributes.href.nodeValue), window.localStorage.getItem('theme'));
      }
    }

    function refreshImageTilesPreview(theme) {
      var tiles = document.getElementsByClassName('tile');
      for (tile of tiles) {
        setWebsiteLogo(tile, getHost(tile.attributes.href.nodeValue), theme);
      }
    }
    refreshImageTiles(); // to be improved
    document.documentElement.style.setProperty('--background', window.localStorage.getItem('background'));
    document.documentElement.style.setProperty('--background-blur', window.localStorage.getItem('backgroundBlur'));

    /* SEARCH SUGGESTIONS
    ---------------------------------------------*/

    function SearchSuggestion(text) {
      document.getElementById('searchInput').value = text;
      Search(text);
    }

    function showSuggestions(suggestions) {
      var elements = document.getElementById('search').firstElementChild.firstElementChild.children;
      for (var i = 0; i < 5; i++) {
        elements[i + 1].firstElementChild.innerText = suggestions[i];
      }
      document.getElementById('search').style.height = '291px';
    }

    function hideSuggestions() {
      if (document.activeElement === document.getElementById('searchInput')) {
        return
      }
      document.getElementById('search').style.height = '45px';
    }
    document.onmouseup = hideSuggestions;

    /* SEARCH ENGINES
    ---------------------------------------------*/

    function getQueryGoogle(q) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          showSuggestions(JSON.parse(this.responseText)[1]);
        }
      };
      xmlhttp.open("GET", "https://cors-anywhere.herokuapp.com/http://suggestqueries.google.com/complete/search?client=firefox&q=" + q + true);
      xmlhttp.send();
    }

    function getQueryGoogle(q, lang) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          showSuggestions(JSON.parse(this.responseText)[1]);
        }
      };
      xmlhttp.open("GET", "https://cors-anywhere.herokuapp.com/http://suggestqueries.google.com/complete/search?client=firefox&q=" + q + "&hl=" + lang, true);
      xmlhttp.send();
    }

    function SearchGoogle(text) {
      var url = "http://www.google.com/search?q=" + text;
      window.open(url,'_self');
    }

    function getQueryDuckDuckGo(q) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          showSuggestions(JSON.parse(this.responseText)[1]);
        }
      };
      xmlhttp.open("GET", "https://cors-anywhere.herokuapp.com/https://ac.duckduckgo.com/ac/?q=" + q + "&type=list", true);
      xmlhttp.send();
    }

    function SearchDuckDuckGo(text) {
      var url = "https://duckduckgo.com/?q=" + text;
      window.open(url,'_self');
    }

    function getQueryWikipedia(q) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          showSuggestions(JSON.parse(this.responseText)[1]);
        }
      };
      xmlhttp.open("GET", "https://en.wikipedia.org/w/api.php?action=opensearch&origin=*&search=" + q, true);
      xmlhttp.send();
    }

    function SearchWikipedia(text) {
      var url = "https://en.wikipedia.org/w/index.php?search=" + text;
      window.open(url,'_self');
    }

    function getQueryYahoo(q) {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          console.log(JSON.parse(this.responseText));
        }
      };
      xmlhttp.open("GET", "https://cors-anywhere.herokuapp.com/https://sugg.search.yahoo.net/sg/?output=jsonp&nresults=10&command=" + q, true);
      xmlhttp.send();
    }

    function SearchYahoo(text) {
      var url = "https://search.yahoo.com/search?p=" + text;
      window.open(url,'_self');
    }
  </script>
</body>
</html>
