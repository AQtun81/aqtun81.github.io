function toggleType(e){function s(s){s.push(e.attributes.skilltag.value)}function a(s){for(var a=0;a<s.length;a++)if(s[a]==e.attributes.skilltag.value){s.splice(a,1);break}}if(e.classList.contains("chip")){var l;switch(l=null==e.classList[1]?0:parseInt(e.classList[1]),l){case 0:s(enabledTypes),e.classList.add("1");break;case 1:a(enabledTypes),s(disabledTypes),e.classList.remove("1"),e.classList.add("2");break;case 2:a(disabledTypes),e.classList.remove("2")}storeSearchParams(),filterSkills(),searchSkills(previousSearch),displaySkills(),updateSkillCount()}}function toggleWeaponType(e){function s(s){s.push(e.attributes.weapontag.value)}function a(s){for(var a=0;a<s.length;a++)if(s[a]==e.attributes.weapontag.value)return void s.splice(a,1)}if(e.classList.contains("chip")){var l;switch(l=null==e.classList[1]?0:parseInt(e.classList[1]),l){case 0:s(enabledWeaponTypes),e.classList.add("1");break;case 1:a(enabledWeaponTypes),s(disabledWeaponTypes),e.classList.remove("1"),e.classList.add("2");break;case 2:a(disabledWeaponTypes),e.classList.remove("2")}storeSearchParams(),filterSkills(),searchSkills(previousSearch),displaySkills(),updateSkillCount()}}function filterSkills(){if(skills=bDataset?skillsFetchFull.slice():skillsFetch.slice(),0!=enabledTypes.length||0!=disabledTypes.length){for(var e=0;e<disabledTypes.length;e++)for(var s=0;s<skills.length;s++)for(var a=0;a<skills[s].Tags.length;a++){if(skills[s].Tags[a]==disabledTypes[e]){skills.splice(s,1),s--;break}if(a==skills[s].Tags.length-1)break}for(e=0;e<enabledTypes.length;e++)for(s=0;s<skills.length;s++)for(a=0;a<skills[s].Tags.length&&skills[s].Tags[a]!=enabledTypes[e];a++)if(a==skills[s].Tags.length-1){skills.splice(s,1),s--;break}}if(0!=enabledWeaponTypes.length||0!=disabledWeaponTypes.length){for(e=0;e<disabledWeaponTypes.length;e++)for(s=0;s<skills.length;s++)for(a=0;a<skills[s].WeaponTags.length;a++){if(skills[s].WeaponTags[a]==disabledWeaponTypes[e]){skills.splice(s,1),s--;break}if(a==skills[s].WeaponTags.length-1)break}for(e=0;e<enabledWeaponTypes.length;e++)for(s=0;s<skills.length;s++)for(a=0;a<skills[s].WeaponTags.length&&skills[s].WeaponTags[a]!=enabledWeaponTypes[e];a++)if(a==skills[s].WeaponTags.length-1){skills.splice(s,1),s--;break}}}function searchChange(e){previousSearch.length<e.length?(previousSearch=e,searchSkills(e),displaySkills(),updateSkillCount()):(previousSearch=e,filterSkills(),searchSkills(e),displaySkills(),updateSkillCount()),storeSearchParams()}function searchSkills(e){if(""!=e)for(var s=0;s<skills.length;s++){var a=skills[s].Name.toLowerCase();-1==a.search(e.toLowerCase())&&(skills.splice(s,1),s--)}}function displaySkills(){if(result="",0!=skills.length){for(var e=0;e<skills.length;e++)result+="<a class='skill' i='"+e+"' href='https://pathofexile.gamepedia.com/"+skills[e].Name.replace(/ /g,"_").replace(/'/g,"%27")+"'><img src=\"SkillIcons/"+skills[e].Name.replace(/'/g,"%27")+'.png"><p>'+skills[e].Name+"</p></a>";for(var s of(skillListElement.innerHTML=result,document.getElementsByClassName("skill")))addSkillMenuEvents(s)}else skillListElement.innerHTML=result}function getAndDisplaySkills(){fetch("data.json").then(e=>e.json()).then(e=>{skillsFetch=e,skills=e,filterSkills(),searchSkills(previousSearch),displaySkills(),updateSkillCount()}).then(fetch("data_full.json").then(e=>e.json()).then(e=>{skillsFetchFull=e,applySearchParams()}))}function addSkillMenuEvents(e){e.addEventListener("mouseover",function(s){var a=document.getElementById("skillMenu");return targetName=e.lastChild.innerText,targetDescription=this.attributes.href.nodeValue,document.getElementById("skillMenuName").innerText=targetName,document.getElementById("skillMenuDescription").innerText=skills[e.attributes.i.value].Description,document.getElementById("skillMenuSkillTags").innerText=skillTagsToString(skills[e.attributes.i.value].Tags),document.getElementById("skillMenuWeaponTags").innerText=weaponTagsToString(skills[e.attributes.i.value].WeaponTags),a.style.display="block",a.style.left=s.pageX+20+"px",a.style.left=e.getBoundingClientRect().x+74+"px",s.clientY>window.innerHeight-200?(a.style.top=s.pageY-155+"px",a.style.top=e.getBoundingClientRect().y-document.body.getBoundingClientRect().y-a.getBoundingClientRect().height+"px"):(a.style.top=s.pageY+"px",a.style.top=e.getBoundingClientRect().y-document.body.getBoundingClientRect().y+"px"),!1},!1),e.addEventListener("mouseout",function(e){var s=document.getElementById("skillMenu");return s.style.display="none",!1},!1)}function skillTagsToString(e){var s="";if(0==e.length)return"No Skill Tags";for(var a of e)switch(a){case 1:s+="Attack, ";break;case 2:s+="Spell, ";break;case 3:s+="Projectile, ";break;case 5:s+="Buff, ";break;case 6:s+="Minion, ";break;case 8:s+="Area, ";break;case 9:s+="Duration, ";break;case 10:s+="Shield, ";break;case 19:s+="Chaining, ";break;case 20:s+="Melee, ";break;case 21:s+="Strike, ";break;case 26:s+="Totem, ";break;case 28:s+="Physical, ";break;case 29:s+="Fire, ";break;case 30:s+="Cold, ";break;case 31:s+="Lightning, ";break;case 33:s+="Trap, ";break;case 34:s+="Movement, ";break;case 35:s+="Damage Over Time, ";break;case 36:s+="Mine, ";break;case 37:s+="Trigger, ";break;case 38:s+="Vaal, ";break;case 39:s+="Aura, ";break;case 42:s+="Chaos, ";break;case 48:s+="Channelling, ";break;case 51:s+="Golem, ";break;case 63:s+="Warcry, ";break;case 64:s+="Instant, ";break;case 65:s+="Brand, ";break;case 69:s+="Curse, ";break;case 78:s+="Guard, ";break;case 79:s+="Travel, ";break;case 80:s+="Blink, ";break;case 84:s+="Nova, ";break;case 92:s+="Slam, ";break;case 97:s+="Hex, ";break;case 98:s+="Mark, "}return s=s.substring(0,s.length-2),s}function weaponTagsToString(e){var s="";if(0==e.length)return"Any Weapon";for(var a of e)switch(a){case 6:s+="Claw, ";break;case 7:s+="Dagger, ";break;case 8:s+="Wand, ";break;case 9:s+="One Hand Sword, ";break;case 10:s+="Thrusting One Hand Sword, ";break;case 11:s+="One Hand Axe, ";break;case 12:s+="One Hand Mace, ";break;case 13:s+="Bow, ";break;case 14:s+="Staff, ";break;case 15:s+="Two Hand Sword, ";break;case 16:s+="Two Hand Axe, ";break;case 17:s+="Two Hand Mace, ";break;case 26:s+="Shield, ";break;case 32:s+="Sceptre, ";break;case 36:s+="Unarmed, ";break;case 56:s+="Rune Dagger, ";break;case 57:s+="Warstaff, "}return s=s.substring(0,s.length-2),s}function updateSkillCount(){var e=document.getElementsByClassName("skill").length;e!=skillCountDisplay&&(element=document.getElementById("matchingSkillsHeader"),skillCountDisplay>e?skillCountDisplay-=Math.ceil(.05*(skillCountDisplay-e)):skillCountDisplay+=Math.ceil(.05*(e-skillCountDisplay)),element.innerText=skillCountDisplay+" Matching Skills:",requestAnimationFrame(updateSkillCount))}function toggleDataset(e){if(e.classList.contains("chip")){var s;switch(s=null==e.classList[1]?0:1,s){case 0:bDataset=!0,e.classList.add("1");break;case 1:bDataset=!1,e.classList.remove("1")}storeSearchParams(),filterSkills(),searchSkills(previousSearch),displaySkills(),updateSkillCount()}}function applySearchParams(){URLSearchParams.forEach(function(e,s){var a=e.split(",");if(a[0].length>0)switch(s){case"es":enabledTypes=a,enabledTypes.forEach(e=>{setStyle(e,"skill",1)});break;case"ds":disabledTypes=a,disabledTypes.forEach(e=>{setStyle(e,"skill",2)});break;case"ew":enabledWeaponTypes=a,enabledWeaponTypes.forEach(e=>{setStyle(e,"weapon",1)});break;case"dw":disabledWeaponTypes=a,disabledWeaponTypes.forEach(e=>{setStyle(e,"weapon",2)});break;case"d":bDataset="true"==a[0],bDataset&&document.querySelector('button[onclick="toggleDataset(this);"]').classList.add(1);break;case"s":previousSearch=a.join(),document.getElementById("skillNameSearch").value=previousSearch}filterSkills(),searchSkills(previousSearch),displaySkills(),updateSkillCount()})}function setStyle(e,s,a){"skill"==s?document.querySelector('button[skilltag="'+e+'"]').classList.add(a):document.querySelector('button[weapontag="'+e+'"]').classList.add(a)}function storeSearchParams(){URLSearchParams.set("es",enabledTypes),URLSearchParams.set("ds",disabledTypes),URLSearchParams.set("ew",enabledWeaponTypes),URLSearchParams.set("dw",disabledWeaponTypes),URLSearchParams.set("d",bDataset),URLSearchParams.set("s",previousSearch),history.replaceState({},"",location.pathname+"?"+URLSearchParams.toString())}function resetFilter(){elements=document.querySelectorAll("button.chip"),elements.forEach(e=>{for(let s=0;s<e.classList.length;s++)s>0&&e.classList.remove(e.classList[s])}),document.getElementById("skillNameSearch").value="",enabledTypes=[],disabledTypes=[],enabledWeaponTypes=[],disabledWeaponTypes=[],bDataset=!1,previousSearch="",filterSkills(),displaySkills(),updateSkillCount(),storeSearchParams()}skillListElement=document.getElementById("skilllist");var skills,skillsFetch,skillsFetchFull,bDataset=!1,previousSearch="",skillCountDisplay=432;getAndDisplaySkills(),enabledTypes=[],disabledTypes=[],enabledWeaponTypes=[],disabledWeaponTypes=[];var URLSearchParams=new URLSearchParams(window.location.search);